var D=Object.defineProperty,O=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var R=(a,s,t)=>s in a?D(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,E=(a,s)=>{for(var t in s||(s={}))A.call(s,t)&&R(a,t,s[t]);if(S)for(var t of S(s))H.call(s,t)&&R(a,t,s[t]);return a},$=(a,s)=>O(a,G(s));var W=(a,s)=>{var t={};for(var l in a)A.call(a,l)&&s.indexOf(l)<0&&(t[l]=a[l]);if(a!=null&&S)for(var l of S(a))s.indexOf(l)<0&&H.call(a,l)&&(t[l]=a[l]);return t};import{j as i,M as C,a as e,R as v,C as u,I as N,r as h,F as K,B as y,u as V,b as x,c as g,d as Y,e as T,N as f,f as _,g as F,h as J,E as P,i as B,k as L,l as Q,S as U,m as X,n as Z}from"./vendor.17d1e8b4.js";const I=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};I();const ee=({heroInfo:a,show:s,setShow:t})=>i(C,{centered:!0,scrollable:!0,show:s,size:"lg",onHide:()=>t(!1),children:[e(C.Header,{closeButton:!0,children:e(C.Title,{children:a.name})}),e(C.Body,{children:i(v,{lg:2,xs:1,children:[e(u,{className:"mb-3",children:e(N,{className:"w-100 h-auto",src:a.image.url})}),i(u,{children:[i("p",{className:"fw-bold",children:["Full Name: ",e("span",{className:"fw-normal",children:a.biography["full-name"]})]}),i("p",{className:"fw-bold",children:["Aliases: ",e("span",{className:"fw-normal",children:a.biography.aliases.join(", ")})]}),i("p",{className:"fw-bold",children:["Weight: ",e("span",{className:"fw-normal",children:a.appearance.weight[1]})]}),i("p",{className:"fw-bold ",children:["Height: ",e("span",{className:"fw-normal",children:a.appearance.height[1]})]}),i("p",{className:"fw-bold ",children:["Eye Color:"," ",e("span",{className:"fw-normal text-capitalize",children:a.appearance["eye-color"]})]}),i("p",{className:"fw-bold ",children:["Hair Color:"," ",e("span",{className:"fw-normal text-capitalize",children:a.appearance["hair-color"]})]}),i("p",{className:"fw-bold ",children:["Occupation: ",e("span",{className:"fw-normal",children:a.work.occupation})]})]})]})})]}),ae=({heroInfo:a,heroes:s,setHeroes:t})=>{const[l,r]=h.exports.useState(!1),n=()=>r(!0),p=()=>{t(s.filter(c=>c.id!==a.id))};return i(K,{children:[e(u,{className:"my-2",children:i("div",{className:"border border-secundary d-flex flex-column h-100",children:[i("div",{className:"position-relative h-100",children:[e(N,{fluid:!0,className:"h-100",src:a.image.url,style:{objectFit:"cover"}}),e("p",{className:"position-absolute bottom-0 m-0 py-2 bg-dark bg-opacity-75 text-white text-center w-100",children:a.name})]}),i("div",{className:"mx-3 my-2",children:[e("p",{className:"m-0",children:"Combat:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.combat==="null"?0:a.powerstats.combat,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.combat==="null"?"0%":`${a.powerstats.combat}%`},children:a.powerstats.combat==="null"?"N/A":a.powerstats.combat})}),e("p",{className:"m-0",children:"Durability:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.durability==="null"?0:a.powerstats.durability,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.durability==="null"?"0%":`${a.powerstats.durability}%`},children:a.powerstats.durability==="null"?"N/A":a.powerstats.durability})}),e("p",{className:"m-0",children:"Intelligence:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.intelligence==="null"?0:a.powerstats.intelligence,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.intelligence==="null"?"0%":`${a.powerstats.intelligence}%`},children:a.powerstats.intelligence==="null"?"N/A":a.powerstats.intelligence})}),e("p",{className:"m-0",children:"Power:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.power==="null"?0:a.powerstats.power,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.power==="null"?"0%":`${a.powerstats.power}%`},children:a.powerstats.power==="null"?"N/A":a.powerstats.power})}),e("p",{className:"m-0",children:"Speed:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.speed==="null"?0:a.powerstats.speed,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.speed==="null"?"0%":`${a.powerstats.speed}%`},children:a.powerstats.speed==="null"?"N/A":a.powerstats.speed})}),e("p",{className:"m-0",children:"Strength:"}),e("div",{className:"progress mb-2",style:{height:"12px"},children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":a.powerstats.strength==="null"?0:a.powerstats.strength,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:a.powerstats.strength==="null"?"0%":`${a.powerstats.strength}%`},children:a.powerstats.strength==="null"?"N/A":a.powerstats.strength})})]}),i("div",{className:"d-flex flex-column mb-3 mx-3",children:[i(y,{className:"mb-2 d-flex justify-content-center align-items-center",variant:"dark",onClick:n,children:[e(N,{className:"h-100 mx-1",src:"https://icongr.am/material/information-outline.svg?size=24&color=ffffff"}),"Details"]}),i(y,{className:"d-flex justify-content-center align-items-center",variant:"danger",onClick:p,children:[e(N,{className:"h-100 mx-1",src:"https://icongr.am/material/trash-can-outline.svg?size=24&color=ffffff"}),"Remove"]})]})]})}),e(ee,{heroInfo:a,setShow:r,show:l})]})},se=({heroes:a,setHeroes:s})=>i("div",{className:"my-4",children:[i("h4",{children:["Heroes (",a.length,"/6):"]}),e(v,{md:3,xs:2,children:a.map(t=>e(ae,{heroInfo:t,heroes:a,setHeroes:s},t.id))})]}),te=({setSearchResult:a,setSearchError:s})=>{const t=V({initialValues:{search:""},onSubmit:r=>l(r.search)}),l=async r=>{const n=r.trim(),c=await T.get(`/search/${n}`);c.data.response==="success"?(s(""),a(c.data.results)):c.data.response==="error"&&(s(c.data.error),a([]))};return e(x,{className:"my-4",children:e(g,{onSubmit:t.handleSubmit,children:i(Y,{className:"mx-auto w-75",children:[e(g.Control,{required:!0,id:"search",minLength:"3",name:"search",placeholder:"Enter hero name...",type:"search",value:t.values.search,onBlur:t.handleBlur,onChange:t.handleChange}),e(y,{type:"submit",variant:"dark",children:"Search"})]})})})},re=({heroInfo:a,heroes:s,setHeroes:t})=>{const[l,r]=h.exports.useState({goods:0,bads:0}),n=m=>{let w=0,b=0;return m.map(k=>{k.biography.alignment==="bad"?b++:w++}),{goods:w,bads:b}},p=m=>{s.length<6?(m==="good"||m==="neutral")&&l.goods<3||m==="bad"&&l.bads<3?t(s.concat(a)):(l.goods===3&&window.alert("Too many good heroes!"),l.bads===3&&window.alert("Too many bad heroes!")):window.alert("Team Completed!")},c=()=>{t(s.filter(m=>m.id!==a.id))};return h.exports.useEffect(()=>{const m=n(s);r(m)},[s]),s.some(m=>m.id===a.id)?e(u,{className:"pb-3",children:i("div",{className:`d-flex flex-column h-100 border-top border-5 rounded shadow ${a.biography.alignment==="bad"?"border-danger":"border-success"}`,role:"button",onClick:()=>c(),children:[i("div",{className:"position-relative h-100",children:[e(N,{fluid:!0,className:"h-100 mb-2",src:a.image.url,style:{objectFit:"cover"}}),e("div",{className:"position-absolute bg-dark bg-opacity-75 bottom-0 w-100",children:e("p",{className:"text-center text-light my-auto py-1",children:a.name})})]}),e("div",{className:"rounded-bottom bg-danger text-white text-center border border-danger",style:{padding:".375rem .75rem"},children:"Remove"})]})}):e(u,{className:"pb-3",children:i("div",{className:`d-flex flex-column h-100 border-top border-5 rounded shadow ${a.biography.alignment==="bad"?"border-danger":"border-success"}`,role:"button",onClick:()=>p(a.biography.alignment),children:[i("div",{className:"position-relative h-100",children:[e(N,{fluid:!0,className:"h-100 mb-2",src:a.image.url,style:{objectFit:"cover"}}),e("div",{className:"position-absolute bg-dark bg-opacity-75 bottom-0 w-100",children:e("p",{className:"text-center text-light my-auto py-1",children:a.name})})]}),e("div",{className:"rounded-bottom bg-dark text-white text-center border border-dark",style:{padding:".375rem .75rem"},children:"Add"})]})})},le=({heroes:a,setHeroes:s,searchError:t,searchResult:l})=>l.length>0?i(x,{children:[i("h4",{children:["Search results: (",l.length," items)"]}),e(v,{md:6,xs:3,children:l.map(r=>e(re,{heroInfo:r,heroes:a,setHeroes:s},r.id))})]}):t.length>0?e(x,{className:"alert alert-danger text-capitalize text-center",role:"alert",children:t}):null,ie=({heroes:a})=>{const[s,t]=h.exports.useState({powerstats:{intelligence:0,strength:0,speed:0,durability:0,power:0,combat:0},averages:{height:0,weight:0}}),[l,r]=h.exports.useState(""),n=c=>{const m=c.reduce((o,d)=>isNaN(d.powerstats.intelligence)?o:o+parseInt(d.powerstats.intelligence),0),w=c.reduce((o,d)=>isNaN(d.powerstats.strength)?o:o+parseInt(d.powerstats.strength),0),b=c.reduce((o,d)=>isNaN(d.powerstats.speed)?o:o+parseInt(d.powerstats.speed),0),k=c.reduce((o,d)=>isNaN(d.powerstats.durability)?o:o+parseInt(d.powerstats.durability),0),j=c.reduce((o,d)=>isNaN(d.powerstats.power)?o:o+parseInt(d.powerstats.power),0),q=c.reduce((o,d)=>isNaN(d.powerstats.combat)?o:o+parseInt(d.powerstats.combat),0),z=c.reduce((o,d)=>o+parseInt(d.appearance.height[1])/c.length,0).toFixed(2),M=c.reduce((o,d)=>o+parseInt(d.appearance.weight[1])/c.length,0).toFixed(2);return{powerstats:{intelligence:m,strength:w,speed:b,durability:k,power:j,combat:q},averages:{height:z,weight:M}}},p=c=>{const m=Object.keys(c.powerstats).reduce((w,b)=>c.powerstats[w]>c.powerstats[b]?w:b);return c.powerstats[m]===0?"":m};return h.exports.useEffect(()=>{const c=n(a),m=p(c);t(c),r(m)},[a]),e("div",{className:"my-4",children:i(u,{className:"my-3",children:[e("h4",{className:"mb-3",children:"Your Team:"}),e("div",{className:"border border-secundary d-flex flex-column h-100",children:i("div",{className:"mx-3 my-3",children:[i("h4",{className:"mb-3 text-capitalize",children:["Type:"," ",e("span",{className:"text-danger fst-italic fw-bold",children:l||"N/A"})]}),e("h4",{children:"Stats:"}),e("p",{className:"m-0",children:"Combat:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.combat==="null"?0:s.powerstats.combat,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.combat==="null"||a.length===0?"0%":`${s.powerstats.combat/a.length}%`},children:s.powerstats.combat==="null"?"N/A":s.powerstats.combat})}),e("p",{className:"m-0",children:"Durability:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.durability==="null"?0:s.powerstats.durability,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.durability==="null"||a.length===0?"0%":`${s.powerstats.durability/a.length}%`},children:s.powerstats.durability==="null"?"N/A":s.powerstats.durability})}),e("p",{className:"m-0",children:"Intelligence:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.intelligence==="null"?0:s.powerstats.intelligence,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.intelligence==="null"||a.length===0?"0%":`${s.powerstats.intelligence/a.length}%`},children:s.powerstats.intelligence==="null"?"N/A":s.powerstats.intelligence})}),e("p",{className:"m-0",children:"Power:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.power==="null"?0:s.powerstats.power,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.power==="null"||a.length===0?"0%":`${s.powerstats.power/a.length}%`},children:s.powerstats.power==="null"?"N/A":s.powerstats.power})}),e("p",{className:"m-0",children:"Speed:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.speed==="null"?0:s.powerstats.speed,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.speed==="null"||a.length===0?"0%":`${s.powerstats.speed/a.length}%`},children:s.powerstats.speed==="null"?"N/A":s.powerstats.speed})}),e("p",{className:"m-0",children:"Strength:"}),e("div",{className:"progress mb-2",children:e("div",{"aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":s.powerstats.strength==="null"?0:s.powerstats.strength,className:"progress-bar",role:"progress-bar",style:{minWidth:"17%",width:s.powerstats.strength==="null"||a.length===0?"0%":`${s.powerstats.strength/a.length}%`},children:s.powerstats.strength==="null"?"N/A":s.powerstats.strength})}),e("p",{className:"m-0",children:"Averages:"}),i(v,{children:[i(u,{className:"text-center",children:[e("p",{className:"fs-6 bg-dark text-white my-0",children:"Height"}),i("p",{className:"fs-6 fw-bold my-0 border border-secundary",children:[s.averages.height," cm"]})]}),i(u,{className:"text-center",children:[e("p",{className:"fs-6 bg-dark text-white my-0",children:"Weight"}),i("p",{className:"fs-6 fw-bold my-0 border border-secundary",children:[s.averages.weight," Kg"]})]})]})]})})]})})},ne=({setIsAuthenticated:a})=>{const[s,t]=h.exports.useState([]),[l,r]=h.exports.useState([]),[n,p]=h.exports.useState(""),c=()=>{localStorage.removeItem("token"),a(!1)};return i("div",{className:"app",children:[e(f,{bg:"dark",variant:"dark",children:i(x,{children:[e(f.Brand,{href:"#",children:"Alkemy React Challenge"}),e(f.Toggle,{}),e(f.Collapse,{className:"justify-content-end",children:e(f.Text,{children:e(y,{size:"sm",variant:"danger",onClick:()=>c(),children:"Log Out"})})})]})}),e(te,{setSearchError:p,setSearchResult:r}),e(le,{heroes:s,searchError:n,searchResult:l,setHeroes:t}),e(x,{children:i(v,{children:[e(u,{lg:3,xs:12,children:e(ie,{heroes:s})}),e(u,{lg:9,xs:12,children:e(se,{heroes:s,setHeroes:t})})]})})]})},ce=({setIsAuthenticated:a})=>{const s=_().shape({email:F().email("*Must be a valid email address").required("*Email is required"),password:F().required("*Password is required")});return e(J,{initialValues:{email:"",password:"",responseError:""},validationSchema:s,onSubmit:(t,{setSubmitting:l,setFieldError:r})=>{T.post("/auth/login",{email:t.email,password:t.password}).then(n=>{const p=n.data.token;localStorage.setItem("token",p),l(!1),a(!0)},n=>{r("responseError","*Wrong Email or Password"),l(!1)})},children:({values:t,errors:l,touched:r,handleChange:n,handleBlur:p,handleSubmit:c,isSubmitting:m})=>e(g,{className:"d-flex flex-column min-vh-100 align-items-center justify-content-center",onSubmit:c,children:i("div",{children:[e("h4",{children:"Login:"}),i(g.Group,{className:"mb-3",controlId:"formEmail",children:[e(g.Label,{children:"Email:"}),e(g.Control,{className:r.email&&l.email?"border-2 border-danger":null,name:"email",placeholder:"Email",type:"text",value:t.email,onBlur:p,onChange:n}),e(P,{className:"text-danger",component:"div",name:"email"})]}),i(g.Group,{className:"mb-3",controlId:"formPassword",children:[e(g.Label,{children:"Password:"}),e(g.Control,{className:r.password&&l.password?"border-2 border-danger":null,name:"password",placeholder:"Password",type:"password",value:t.password,onBlur:p,onChange:n}),e(P,{className:"text-danger",component:"div",name:"password"})]}),e(y,{className:"my-2",disabled:m,type:"submit",children:"Submit"}),l.responseError&&e("div",{className:"text-danger",children:l.responseError})]})})})};function oe(l){var r=l,{children:a,isAuthenticated:s}=r,t=W(r,["children","isAuthenticated"]);return e(B,$(E({},t),{render:({location:n})=>s?e(L,{to:{pathname:"/",state:{from:n}}}):a}))}function de(l){var r=l,{children:a,isAuthenticated:s}=r,t=W(r,["children","isAuthenticated"]);return e(B,$(E({},t),{render:({location:n})=>s?a:e(L,{to:{pathname:"/login",state:{from:n}}})}))}function me(){const[a,s]=h.exports.useState(()=>localStorage.getItem("token")!==null);return e(Q,{children:i(U,{children:[e(oe,{exact:!0,isAuthenticated:a,path:"/login",children:e(ce,{setIsAuthenticated:s})}),e(de,{exact:!0,isAuthenticated:a,path:"/",children:e(ne,{setIsAuthenticated:s})})]})})}X.render(e(Z.StrictMode,{children:e(me,{})}),document.getElementById("root"));
